<!-- https://tailwindcomponents.com/component/breadcrumbs-1 & 
    breadcrumbs from http://hugocodex.org/add-ons/breadcrumbs/ 
https://codewithhugo.com/alpinejs-x-data-watch-url/

--> 
{{ if .IsSection }}

<nav 
    class="text-black text-sm font-robmono w-full flex justify-between py-4 " 
    aria-label="previous and next products"    
    x-data="alpineInstance()"
    x-init="
    index = parseInt(new URLSearchParams(location.search).get('index'),10);
    queryTerm = new URLSearchParams(location.search).get('q');
    url = 'http://localhost:1313/gr/collections/' + queryTerm + '/index.json';
    fetch(url)
        .then(response => response.json())
        .then(data => products = data);
    ">

    <template x-for="product in Object.values(products)">

        <div class="flex justify-items-stretch w-1/2">
                        
                <template x-if="previousProduct === parseInt(product.id)">

                        <a class="flex flex-inline items-center justify-self-start" :href="product.link">
                            <svg class="w-4 h-4 mx-2" viewBox="0 0 16 12">
                            <path d="M3.617 5.016h11.669v1.5h-12.1L7.15 10.48l-1.06 1.06L.53 5.982 6.09.421l1.061 1.06-3.534 3.535z" fill-rule="nonzero"></path>
                            </svg>
                            Previous item
                        </a>
                </template>
                
             

                <template x-if="nextProduct === parseInt(product.id)">                

                            <a class="flex flex-inline items-center  justify-self-end" :href="product.link" >Next item
                            <svg class="w-4 h-4 mx-2" viewBox="0 0 16 12">
                            <path d="M12.199 6.946H.53v-1.5h12.1L8.664 1.481l1.06-1.06 5.562 5.56-5.561 5.56-1.06-1.06 3.534-3.535z" fill-rule="nonzero"></path>
                            </svg>
                            </a>

                </template>
            </div>
    </template>
</div>


    <script>
        function alpineInstance() {
            const queryTerm = new URLSearchParams(location.search).get('q');
            let index = parseInt(new URLSearchParams(location.search).get('index'),10);
            const currentProduct = index;
            const nextProduct = index + 1;
            const previousProduct = index - 1;
                return {
                    products: {},
                    nextProduct: nextProduct,
                    previousProduct: previousProduct
                }
            }

</script> 


</nav>
{{ end }}